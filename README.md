# Codex

Codex is a CLI utility designed to help you easily extract code from various types of projects. It automatically detects the project type, generates an appropriate configuration file (`codex.yml`), and extracts the relevant code while excluding unnecessary files and folders.

## Features

- Automatic Project Detection: Codex can automatically detect the type of project (e.g., Node.js, Python, Go) and generate a `codex.yml` configuration file with appropriate exclusion rules.
- Customizable Configuration: Customize the `codex.yml` file to specify which files and folders should be excluded from code extraction.
- Flexible Extraction: If `codex.yml` is not present, Codex will use default settings with reasonable exclusions.
- Cross-Platform: Codex is written in Go, making it compatible with Windows, Linux, and macOS.

## Installation

Clone the Repository and set-up prereqs:

```bash
git clone https://github.com/techspeque/codex
cd codex

go mod init codex
go mod tidy
```

## Build the Executable

`go build -o codex ./src`

This will generate an executable named codex (or codex.exe on Windows) in the project directory.

## Usage

### Initialize Configuration

The init command inspects the specified directory, detects the project type, and generates a codex.yml file with default exclusion rules.

```bash
./codex init <directory>
```

Example:

```bash
./codex init /path/to/project
```

This command will create a codex.yml file in the project directory based on the detected project type (e.g., Node.js, Python).

### Run Code Extraction

The run command reads the codex.yml file in the specified directory and extracts the code, saving it to the specified output file. If no codex.yml is found, it uses default settings.

`./codex run <directory> --output <output_file>`

Example:

`./codex run /path/to/project --output extracted_code.txt`

This command extracts the code from the specified directory, excluding the files and folders defined in codex.yml, and saves the output to `extracted_code.txt`.

## Command-Line Arguments

`init`: Initialize a codex.yml file based on the detected project type.
    `<directory>`: The directory to inspect for project type.
`run`: Extract code based on the `codex.yml` file.
    `<directory>`: The directory from which to extract code.
    `--output`: (Optional) The output file where the extracted code will be saved. Defaults to code.txt.

## Configuration

The `codex.yml` file is automatically generated by the init command and contains two sections:

`ExcludeFolders`: A list of folder names to be excluded during code extraction.

`ExcludeFiles`: A list of file names or patterns to be excluded during code extraction.

Example codex.yml for a Node.js project:

```yaml

ExcludeFolders:
  - node_modules
  - dist
  - build

ExcludeFiles:
  - package-lock.json
  - yarn.lock
```

You can manually edit this file to customize which files and folders should be excluded.

### Example Workflow

```bash
# Navigate to your project directory:
cd /path/to/your/project

# Initialize codex.yml:
./codex init .

# Run code extraction:
./codex run . --output my_project_code.txt
```

This workflow will detect the project type, generate a `codex.yml` file, and extract the code based on the exclusions specified in the file.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request or open an issue on GitHub.

## License

This project is licensed under the MIT License. See the LICENSE file for more details.
